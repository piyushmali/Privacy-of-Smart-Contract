# Privacy of Smart Contract Using zk-SNARKs

This project demonstrates how to implement privacy-preserving transactions in a smart contract using zk-SNARKs (Zero-Knowledge Succinct Non-Interactive Arguments of Knowledge). The project uses Hardhat for smart contract development and ZoKrates for generating zk-SNARK proofs.

## Project Structure

```
zk-snarks-project/
│
├── contracts/
│   ├── PrivacyPreservingTransaction.sol  # Smart contract for privacy-preserving transactions
│   ├── verifier.sol   # Generated by ZoKrates, used to verify zk-SNARK proofs
│
├── scripts/
│   ├── deploy.js      # Script to deploy the smart contract
│
├── zokrates/
│   ├── transaction.zok    # ZoKrates circuit file
│   ├── out                # Compiled circuit
│   ├── proving.key        # Proving key (generated)
│   ├── verification.key   # Verification key (generated)
│   ├── verifier.sol       # Solidity verifier (generated)
│   ├── proof.json         # zk-SNARK proof (generated)
│
├── test/
│   └── privacyTest.js     # Mocha test for the smart contract
│
├── hardhat.config.js      # Hardhat configuration file
└── package.json           # npm dependencies
```

## Prerequisites

- **Golang**: Required for ZoKrates.
- **Node.js** and **npm**: Needed for smart contract development.
- **Hardhat**: A development environment for Ethereum.
- **ZoKrates**: A toolbox for zk-SNARKs on Ethereum.

## Installation

### Step 1: Install Prerequisites

1. **Install Golang:**

   ```bash
   sudo apt update
   sudo apt install golang-go
   ```

2. **Install Node.js and npm:**

   ```bash
   sudo apt update
   sudo apt install nodejs npm
   ```

3. **Install Hardhat:**

   ```bash
   npm install --save-dev hardhat
   ```

4. **Initialize Hardhat:**

   ```bash
   npx hardhat
   # Choose "Create an empty hardhat.config.js" when prompted
   ```

5. **Install ZoKrates:**
   ```bash
   git clone https://github.com/Zokrates/ZoKrates.git
   cd ZoKrates
   cargo build --release
   export PATH=$PATH:$(pwd)/target/release
   zokrates --version
   ```

### Step 2: Compile Smart Contracts

```bash
npx hardhat compile
```

### Step 3: Generate zk-SNARK Proofs with ZoKrates

1. **Navigate to the ZoKrates directory:**

   ```bash
   cd zokrates
   ```

2. **Compile the Circuit:**

   ```bash
   zokrates compile -i transaction.zok
   ```

3. **Generate Trusted Setup:**

   ```bash
   zokrates setup
   ```

4. **Export the Verifier Contract:**

   ```bash
   zokrates export-verifier
   ```

5. **Generate a Proof:**
   ```bash
   zokrates compute-witness -a 3 4 7
   zokrates generate-proof
   ```

### Step 4: Deploy the Smart Contract

```bash
npx hardhat run scripts/deploy.js --network localhost
```

### Step 5: Test the Smart Contract

1. **Replace the placeholder proof data in `test/privacyTest.js` with actual values generated by ZoKrates (found in `proof.json`).**

2. **Run the tests:**
   ```bash
   npx hardhat test
   ```

## Output

### Compilation Output:

```
Compiling 2 files with 0.8.0
Compilation finished successfully
```

### Deployment Output:

```
PrivacyPreservingTransaction deployed to: 0xYourContractAddress
```

### ZoKrates Proof Generation Output:

```
Witness: OK
Proof: OK
```

### Test Output:

```
PrivacyPreservingTransaction
  ✔ should verify a valid transaction (XXXms)

1 passing (XXXms)
```

## Conclusion

This project demonstrates how zk-SNARKs can be used to implement privacy-preserving transactions in smart contracts. By following the steps outlined in this README, you can set up the project, generate zk-SNARK proofs, deploy the smart contract, and verify transactions on the Ethereum blockchain.

## License

This project is licensed under the MIT License
